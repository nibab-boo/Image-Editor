<!-- extends from layout.html -->
{% extends 'layout.html' %}

<!-- title -->
{% block title %}
  imazato
{% endblock %}


<!-- body -->
{% block body %}
  <div class="container p-5">    
    <h2>This is index with autoreload.</h2>
    <form method="post" action="/image" enctype="multipart/form-data">
      <div class="w-75">
        <div class="input-group">
          <input type="file" accept="image/*" name="photo" class="form-control" id="image-file" aria-describedby="inputGroupFileAddon04" aria-label="Upload">
        </div>
      </div>
      <div class="my-3 mx-auto">
        <div class="d-flex">
          <input type="submit" name="blur" value="grayScale">
        </div>
      </div>
      <div class="mx-auto my-3 w-50">
        <img width="100" id="img-preview">
      </div>
    </form>
  </div>
  <script>
    const img = document.getElementById("img-preview");
    const fileInput = document.getElementById("image-file");
    // on changing Input
    const onChange = (e) => {
      const reader = new FileReader();
      const file = e.currentTarget.files[0];

      reader.onload = () => {
        img.src = reader.result;
      }

      if (file) {
        reader.readAsDataURL(file);
      }
    }

    // add Event Listener for input on Change 
    fileInput.addEventListener("change", onChange)
  
  </script>
{% endblock %}
